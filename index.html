<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>darmarket</title>

  <script src="https://cdn.jsdelivr.net/npm/react@18/umd/react.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>

  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Tajawal', sans-serif;
      direction: rtl;
    }
    .input {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 8px;
    }
    .btn-green {
      width: 100%;
      background: #16a34a;
      color: white;
      padding: 14px;
      border-radius: 10px;
      font-weight: bold;
    }
  </style>
</head>

<body class="bg-gray-100 pb-20">
<div id="root"></div>

<script type="text/babel">
const { useState, useRef } = React;

/* ===== Ø¥Ø¹Ù„Ø§Ù† ===== */
const AdBanner = ({ text }) => (
  <div className="bg-yellow-400 text-black text-center p-3 rounded font-semibold">
    {text}
  </div>
);

const App = () => {
  const [page, setPage] = useState("list");
  const [properties, setProperties] = useState([]);

  const propertyRef = useRef({
    title: "",
    price: "",
    city: "",
    rooms: "",
    bathrooms: "",
    area: "",
    type: "Ø¨ÙŠØ¹",
    description: "",
    images: []
  });

  const handleImages = (files) => {
    propertyRef.current.images = Array.from(files).map(file =>
      URL.createObjectURL(file)
    );
  };

  const addProperty = (e) => {
    e.preventDefault();
    const p = propertyRef.current;

    if (!p.title || !p.price || !p.city) {
      alert("Ø§Ù„Ø¹Ù†ÙˆØ§Ù†ØŒ Ø§Ù„Ø³Ø¹Ø±ØŒ ÙˆØ§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø¥Ø¬Ø¨Ø§Ø±ÙŠØ©");
      return;
    }

    setProperties(prev => [
      ...prev,
      { id: Date.now(), ...p }
    ]);

    propertyRef.current = {
      title: "", price: "", city: "", rooms: "",
      bathrooms: "", area: "", type: "Ø¨ÙŠØ¹",
      description: "", images: []
    };

    setPage("list");
  };

  /* ===== ØµÙØ­Ø© Ø§Ù„Ø¥Ø¶Ø§ÙØ© ===== */
  const AddPage = () => (
    <form onSubmit={addProperty} className="p-4 space-y-3">
      <input className="input" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¹Ù‚Ø§Ø±"
        onInput={e => propertyRef.current.title = e.target.value} />

      <input className="input" type="number" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø¨Ø§Ù„Ø¯Ø±Ù‡Ù…"
        onInput={e => propertyRef.current.price = e.target.value} />

      <input className="input" placeholder="Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©"
        onInput={e => propertyRef.current.city = e.target.value} />

      <div className="flex gap-2">
        <input className="input" type="number" placeholder="ØºØ±Ù"
          onInput={e => propertyRef.current.rooms = e.target.value} />
        <input className="input" type="number" placeholder="Ø­Ù…Ø§Ù…Ø§Øª"
          onInput={e => propertyRef.current.bathrooms = e.target.value} />
      </div>

      <input className="input" type="number" placeholder="Ø§Ù„Ù…Ø³Ø§Ø­Ø© (Ù…Â²)"
        onInput={e => propertyRef.current.area = e.target.value} />

      <select className="input"
        onChange={e => propertyRef.current.type = e.target.value}>
        <option value="Ø¨ÙŠØ¹">Ø¨ÙŠØ¹</option>
        <option value="ÙƒØ±Ø§Ø¡">ÙƒØ±Ø§Ø¡</option>
      </select>

      <textarea className="input" rows="3" placeholder="ÙˆØµÙ Ø§Ù„Ø¹Ù‚Ø§Ø±"
        onInput={e => propertyRef.current.description = e.target.value}></textarea>

      <input type="file" multiple accept="image/*"
        onChange={e => handleImages(e.target.files)} />

      <button className="btn-green">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù‚Ø§Ø±</button>
    </form>
  );

  /* ===== ØµÙØ­Ø© Ø§Ù„Ø¹Ø±Ø¶ Ù…Ø¹ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ===== */
  const ListPage = () => (
    <div className="p-4 space-y-4">

      {/* Ø¥Ø¹Ù„Ø§Ù† Ø¹Ù„ÙˆÙŠ */}
      <AdBanner text="ğŸ“¢ Ø¥Ø¹Ù„Ø§Ù† Ù…Ù…ÙˆÙ„: ÙˆÙƒØ§Ù„Ø§Øª Ø¹Ù‚Ø§Ø±ÙŠØ© ÙˆØ®Ø¯Ù…Ø§Øª ÙƒØ±Ø§Ø¡" />

      {properties.map((p, i) => (
        <React.Fragment key={p.id}>

          {/* Ø¥Ø¹Ù„Ø§Ù† Ø¨ÙŠÙ† ÙƒÙ„ 3 Ø¹Ù‚Ø§Ø±Ø§Øª */}
          {i > 0 && i % 3 === 0 && (
            <AdBanner text="â­ Ø¥Ø¹Ù„Ø§Ù†: Ø±ÙˆÙ‘Ø¬ Ù„Ø¹Ù‚Ø§Ø±Ùƒ Ù‡Ù†Ø§" />
          )}

          <div className="bg-white rounded shadow p-3">
            {p.images[0] && (
              <img src={p.images[0]}
                   className="w-full h-40 object-cover rounded mb-2" />
            )}
            <div className="font-bold">{p.title}</div>
            <div className="text-blue-600">{p.price} Ø¯Ø±Ù‡Ù…</div>
            <div className="text-sm text-gray-600">
              {p.city} â€“ {p.type}
            </div>
          </div>

        </React.Fragment>
      ))}
    </div>
  );

  return (
    <div>
      {/* Ø´Ø±ÙŠØ· Ø¹Ù„ÙˆÙŠ */}
      <div className="bg-blue-600 text-white p-3 flex justify-between">
        <div>darmarket</div>
        <button onClick={() => setPage(page === "add" ? "list" : "add")}>
          {page === "add" ? "Ø§Ù„Ø±Ø¬ÙˆØ¹" : "Ø¥Ø¶Ø§ÙØ©"}
        </button>
      </div>

      {page === "add" ? <AddPage /> : <ListPage />}
    </div>
  );
};

ReactDOM.render(<App />, document.getElementById("root"));
</script>

<!-- Ø¥Ø¹Ù„Ø§Ù† Ø«Ø§Ø¨Øª Ø£Ø³ÙÙ„ Ø§Ù„Ø´Ø§Ø´Ø© -->
<div class="fixed bottom-0 left-0 right-0 bg-blue-700 text-white text-center p-3 font-semibold">
  ğŸ“ Ø¥Ø¹Ù„Ø§Ù†: ÙˆÙƒØ§Ù„Ø§Øª Ø¹Ù‚Ø§Ø±ÙŠØ© â€“ Ø§ØªØµÙ„ Ø§Ù„Ø¢Ù†
</div>

</body>
</html>
